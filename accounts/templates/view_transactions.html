{% load i18n %}
{% load humanize %}
{% load money_overall %}

{% pagination_links transactions %}

<table class="transactions">
	<tbody>
		{% for t in transactions.object_list %}
		{% ifchanged t.date %}
		<tr>
			<th class="date" colspan="4">{{ t.date|naturalday|capfirst }}</th>
		</tr>
		{% endifchanged %}
		<tr class="{% cycle 'odd' 'even' %}">
			<td class="payee">
				<div class="actions">
					<a href="{% url accounts.views.edit_transaction t.account.pk t.pk %}" title="{% trans 'Edit Transaction' %}"><span class="sprite transaction_edit">{% trans 'Edit Transaction' %}</span></a>
					<a href="{% url accounts.views.delete_transaction t.account.pk t.pk %}" title="{% trans 'Delete Transaction' %}"><span class="sprite delete">{% trans 'Delete Transaction' %}</span></a>
				</div>
				<span class="sprite{% if t.mobile %} mobile" title="{% trans 'Entered from a mobile device' %}{% endif %}">{% if t.mobile %}{% trans 'Entered from a mobile device' %}{% endif %}</span>
				<a href="{% url accounts.views.edit_transaction t.account.pk t.pk %}">{{ t.payee.name }}</a>
				{% if t.tags.all %}
				<div class="tags"><span class="sprite tag"></span>
					{% for tag in t.taglink_set.select_related.all %}
					{{ tag.tag.name }}{% if tag.split != t.amount %}:{{ tag.split }}{% endif %}
					{% endfor %}
				</div>
				{% endif %}
			</td>
			<td class="money{% if t.credit %} in{% endif %}">{% if t.credit %}+ {% endif %}{{ t.amount|currency:t.account.currency }}</td>
		</tr>
		{% empty %}
		<tr class="odd">
			<td colspan="2">{% trans 'No transactions yet' %}</td>
		</tr>
		{% endfor %}
	</tbody>
</table>